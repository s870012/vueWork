import{r as u,c as a,a as o,w as i,v as r,d as f,u as y,o as d}from"./index-CLPrgGHp.js";import{a as v}from"./index-NIGUFBhG.js";const x={class:"container text-center mt-5"},h={class:"row justify-content-center"},U={key:0,class:"h3 mb-3 font-weight-normal"},V={key:1,class:"h3 mb-3 font-weight-normal"},$={class:"col-8"},_={key:0,id:"form",class:"form-signin"},q={class:"form-floating mb-3"},S={class:"form-floating mb-3"},C={class:"form-floating"},F={key:1,id:"form",class:"form-signin"},P={class:"form-floating mb-3"},B={class:"form-floating mb-3"},M={__name:"SignupView",setup(E){const p="https://todolist-api.hexschool.io/",b=y(),m=u(!1),c=n=>{m.value=n},e=u({email:"",password:"",nickname:""}),w=async n=>{try{await v.post(`${p}users/sign_up`,n),m.value=!1}catch(s){console.log("錯誤",s),alert("註冊失敗")}},l=u({email:"",password:""}),g=u(""),k=async n=>{try{const s=await v.post(`${p}users/sign_in`,n);g.value=s.data.token,document.cookie=`TodoToken=${s.data.token};path=/`,b.push("/todo")}catch(s){console.log("錯誤",s),alert("登入失敗")}};return(n,s)=>(d(),a("div",x,[o("div",h,[m.value?(d(),a("h1",U,"註冊")):(d(),a("h1",V,"登入")),o("div",$,[m.value?(d(),a("form",_,[o("div",q,[i(o("input",{type:"email",class:"form-control",id:"email",placeholder:"name@example.com","onUpdate:modelValue":s[0]||(s[0]=t=>e.value.email=t),required:"",autoFocus:""},null,512),[[r,e.value.email]]),s[9]||(s[9]=o("label",{for:"email"},"Email address",-1))]),o("div",S,[i(o("input",{type:"password",class:"form-control",id:"password",placeholder:"Password","onUpdate:modelValue":s[1]||(s[1]=t=>e.value.password=t),required:""},null,512),[[r,e.value.password]]),s[10]||(s[10]=o("label",{for:"password"},"Password",-1))]),o("div",C,[i(o("input",{type:"text",class:"form-control",id:"nickname",placeholder:"nickname","onUpdate:modelValue":s[2]||(s[2]=t=>e.value.nickname=t),required:""},null,512),[[r,e.value.nickname]]),s[11]||(s[11]=o("label",{for:"nickname"},"Nickname",-1))]),o("button",{class:"btn btn-lg btn-primary w-100 mt-3",type:"submit",onClick:s[3]||(s[3]=f(t=>w(e.value),["prevent"]))}," 註冊 "),o("button",{class:"btn btn-lg btn-outline-dark w-100 mt-3",type:"submit",onClick:s[4]||(s[4]=t=>c(!1))}," 登入 ")])):(d(),a("form",F,[o("div",P,[i(o("input",{type:"mail",class:"form-control",id:"username",placeholder:"name@example.com","onUpdate:modelValue":s[5]||(s[5]=t=>l.value.email=t),required:"",autoFocus:""},null,512),[[r,l.value.email]]),s[12]||(s[12]=o("label",{for:"username"},"Email address",-1))]),o("div",B,[i(o("input",{type:"password",class:"form-control",id:"password",placeholder:"Password","onUpdate:modelValue":s[6]||(s[6]=t=>l.value.password=t),required:""},null,512),[[r,l.value.password]]),s[13]||(s[13]=o("label",{for:"password"},"Password",-1))]),o("button",{class:"btn btn-lg btn-primary w-100 mt-3",type:"submit",onClick:s[7]||(s[7]=f(t=>k(l.value),["prevent"]))}," 登入 "),o("button",{class:"btn btn-lg btn-outline-dark w-100 mt-3",type:"submit",onClick:s[8]||(s[8]=t=>c(!0))}," 前往註冊 ")]))])])]))}};export{M as default};
